<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lesson 5</title>
</head>
<body>


<style>

  .tick-tack {
    border-collapse: separate;
  }

  .tick-tack td {
    background-color: #d5ebfb;
    border-top: 2px solid #ebf1f6;
    border-left: 2px solid #ebf1f6;
    border-bottom: 2px solid #0490d3;
    border-right: 2px solid #0490d3;
    width: 100px;
    height: 100px;
  }

  .tick-tack .clicked {
    background-color: #0490d3;
    border: 1px solid #0490d3;
  }


</style>


<table class="tick-tack">
  <tr>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table>


<script>
let k=0;

  window.addEventListener('load', function() {
    let boxex =  document.querySelectorAll('td'); // получить все элементы с классом td
    let boxex2d = [
      [], [], []
    ];
    for (let i = 0; i < boxex.length; i++) {
      console.log('box ' + i, boxex[i]);
      let colInd = i % 3;
      let rowInd = Math.floor(i / 3);
      boxex2d[rowInd][colInd] = boxex[i];

      }
    console.log('boxes2d', boxex2d);



    for (let i = 0; i < boxex.length; i++) {
      let box = boxex[i];

      box.addEventListener('click', function (event) {
        const $currentBox = event.currentTarget; // current target  содержит ссылку на элемент по которому произвели клик
        if($currentBox.innerHTML != ''){
          return
        }
        $currentBox.innerHTML = 'X';
        $currentBox.classList.add('clicked');

        k++;
        if(k % 2 == 0){
          box.innerHTML = ('O');
          //$currentBox.classList.add('clicked');
          //k++;
        }
        if((boxex2d[0][0].innerHTML == boxex2d[0][1].innerHTML) && (boxex2d[0][2].innerHTML == boxex2d[0][1].innerHTML) && (boxex2d[0][0].innerHTML != '')) {

          setTimeout(function () { // выполнить функцию через 1 сек
            alert('Game over');
          }, 1000)
        }
      })


    }
  });



</script>

</body>
</html>